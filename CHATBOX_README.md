# AI 对话可视化界面

这是一个专门用于可视化大模型对话流的前端应用，可以清晰地展示AI的思考过程、工具调用和文件读取等操作。

## 功能特性

### 🎯 核心功能
- **对话流可视化**: 清晰展示用户与AI的对话历史
- **工具调用可视化**: 实时显示AI调用的工具和参数
- **文件读取展示**: 可视化AI读取的文件内容
- **思考过程展示**: 显示AI的思考和推理过程
- **加载状态**: 动态显示AI工作状态

### 🎨 界面特性
- **响应式设计**: 适配不同屏幕尺寸
- **交互式组件**: 可展开/折叠的详细信息
- **时间戳**: 显示每条消息的时间
- **状态指示器**: 清晰的视觉状态反馈

## 组件结构

```
components/
├── ChatContainer.tsx       # 主聊天容器
├── MessageItem.tsx         # 单个消息项
├── ToolCallVisualization.tsx  # 工具调用可视化
├── FileViewer.tsx          # 文件内容查看器
├── ThinkingProcess.tsx     # 思考过程展示
├── LoadingMessage.tsx      # 加载状态
└── TimeStamp.tsx          # 时间戳组件
```

## 数据格式

应用支持以下数据格式：

```typescript
interface ChatData {
  items: Array<{
    type: 'message' | 'finalResponse';
    data: {
      role?: 'user' | 'assistant';
      content: string;
    } | string;
  }>;
}
```

### 工具调用格式
```xml
<use_tool>
  <tool_name>BatchTool</tool_name>
  <arguments>
    {
      "description": "操作描述",
      "invocations": [
        {
          "tool_name": "FileReadTool",
          "input": {
            "file_path": "/path/to/file"
          }
        }
      ]
    }
  </arguments>
</use_tool>
```

## 使用方法

### 启动应用
```bash
cd frontend
npm run dev
```

### 访问界面
打开浏览器访问: http://localhost:3000

### 交互功能
1. **发送消息**: 在底部输入框输入问题，按回车或点击发送
2. **查看工具调用**: 点击工具调用卡片可展开查看详细参数
3. **查看文件内容**: 点击文件卡片可展开查看文件内容
4. **查看原始输出**: 在工具执行结果中点击"查看原始输出"

## 可视化元素

### 消息类型
- 🔵 **用户消息**: 蓝色气泡，右对齐
- 🔘 **AI消息**: 白色气泡，左对齐
- 🟡 **工具执行结果**: 黄色背景
- 🟢 **最终回复**: 绿色背景

### 工具调用
- 🔧 **工具调用**: 紫色背景，可展开查看详情
- 📄 **文件读取**: 绿色背景，显示文件图标和路径
- 🤔 **思考过程**: 蓝色背景，显示AI思考内容

### 状态指示
- ⚡ **加载中**: 动态点跳跃动画
- ✅ **成功**: 绿色对勾
- ❌ **失败**: 红色错误提示

## 自定义配置

### 修改样式
编辑 `app/globals.css` 文件来自定义全局样式。

### 添加新的工具类型
在 `ToolCallVisualization.tsx` 中添加新的工具解析逻辑。

### 扩展文件类型支持
在 `FileViewer.tsx` 中的 `getFileIcon` 函数中添加新的文件类型。

## 技术栈

- **React 18**: 前端框架
- **Next.js 15**: 全栈框架
- **TypeScript**: 类型安全
- **Tailwind CSS**: 样式框架
- **Responsive Design**: 响应式设计

## 最佳实践

1. **数据结构**: 保持数据格式的一致性
2. **性能优化**: 对大型文件内容进行截断显示
3. **用户体验**: 提供清晰的视觉反馈
4. **可访问性**: 支持键盘导航和屏幕阅读器

## 故障排除

### 常见问题
1. **样式不显示**: 确保Tailwind CSS配置正确
2. **组件不渲染**: 检查数据格式是否正确
3. **工具调用解析失败**: 检查XML格式是否符合规范

### 调试方法
- 使用浏览器开发者工具查看控制台错误
- 检查网络请求状态
- 验证数据格式的正确性 